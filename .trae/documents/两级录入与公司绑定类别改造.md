## 目标
- 录入时先选择“分公司”，再选择该公司的“费用类别”，类别随公司联动。
- 集团视图下：仅显示“全部/收入/支出”全局筛选；其它类别筛选需要先选公司。
- 列表与最近交易始终显示分公司标识；提交强制落到选定公司。

## 数据层
- 在Store中新增公司类别配置：`categoriesByCompany = { company1: ['修车','零件','维保','空调','工资','其他'], company2: ['改装','零件','维保','工资','其他'], company3: ['空调','设备','维保','工资','其他'] }`
- 新增API：
  - `getCompanyCategories(companyId)`返回该公司的类别数组
  - 可扩展：`addCompanyCategory(companyId, name)`、`removeCompanyCategory(companyId, name)`
- 交易字段保持：`{ companyId, type: income|expense, category, ... }`；在集团视图新增时必须选择`companyId`。

## UI/交互变更
- 录入弹窗（仪表板与交易页通用）：
  - 新增“公司”下拉（默认跟随顶部公司选择；当顶部是`全部分公司`时默认空，用户必须选择）
  - “类别”下拉根据所选公司调用`getCompanyCategories(companyId)`填充；切换公司时同步类别选项
  - 若未选择公司，点击“添加交易”给出错误提示：“请先选择分公司”
- 顶部筛选chips：
  - 在集团视图仅显示“全部/收入/支出”三项
  - 选择具体公司后，动态生成该公司的类别chips（修车/改装/空调/零件/维保/工资/其他）
- 列表/最近交易：在描述下，统一显示公司名徽标；在集团视图下仍显示来源公司

## 页面改造
- 仪表板 index.html
  - 弹窗加入“公司”下拉与类别联动；提交校验公司选择
  - 最近交易在集团视图显示公司名
  - 类别chips联动顶部公司选择
- 交易页 transactions.html
  - 顶部：集团+公司选择；集团视图仅显示全局chips
  - 弹窗两级下拉；编辑时预填公司与类别；保存按记录公司更新
  - 过滤支持“公司+类别”的组合（在集团视图下点击某公司类别时过滤出该公司对应类别）
- 预算与报表
  - 预算页不改录入类别结构（保留部门字段）；列表继续显示公司徽标
  - 报表页维持集团/公司聚合，不改两级类别结构

## 校验与默认值
- 在集团视图下新增交易时，`companyId`必填；`category`必须属于该公司类别集
- 顶部选定公司时，弹窗默认公司为该值；类别按公司自动选第一个，可修改

## 迁移与兼容
- 初始化时为每家公司写入默认类别集；允许后续扩展
- 与现有`localStorage`兼容；若历史记录类别不在该公司类别集内，保留显示但不在chips中出现

## 验证
- 清空`localStorage`后硬刷新
- 在集团视图测试：未选公司时提交应提示；选择公司后类别联动，提交成功并在列表显示公司名
- 在单公司视图测试：chips与类别正确，新增/编辑成功并联动仪表板数值

## 交付
- 修改Store与两页弹窗与chips联动；统一校验与错误提示；回归测试四页联动与持久化。

请确认该方案，我将开始实现并完成验证。